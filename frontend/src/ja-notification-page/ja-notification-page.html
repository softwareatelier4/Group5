<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">


<dom-module id="ja-notification-page">

  <template>
    <style>
    #notification-container {
      padding-top: 120px;
    }
    </style>

    <section id="notification-container">

      <div> NOTIFICATIONS : </div>

        <section id="freelancers-list">

          <iron-ajax id="notificationlist" url="/notification/{{user._id}}/user" method="GET" handle-as="json" on-response="_onResponse"></iron-ajax>
          <iron-ajax id="freelancernotificationlist" url="/notification/{{user.freelancerId}}/freelancer" method="GET" handle-as="json" on-response="_onFreelancerResponse"></iron-ajax>


        </section>

    </section>

  </template>



  <script>
    Polymer({
      is: "ja-notification-page",

      properties: {
        user : {
          type: Object,
        }
      },

      ready: function() {
        const ajaxel = this.$.notificationlist;
        ajaxel.generateRequest();
        if(this.user.userType == 'Freelancer'){
          ajaxel = this.$.freelancernotificationlist;
          ajaxel.generateRequest();
        }
      },

      _onResponse: function(evt) {
        console.log(evt.detail.response);

        if(this.user.userType == 'Freelancer'){
          console.log("freelancer");
          //handleFreelancerData()
        }
        // if(this.user.userType == "Normal"){
        //   console.log("normal");
        //   //handleNormalData()
        // }


      },

      _onFreelancerResponse: function(evt) {
        console.log(evt.detail.response);
      },

    });
  </script>

</dom-module>
