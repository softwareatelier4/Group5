<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<dom-module id="ja-profile">

  <template>
    <!-- /*<style>
      /* CSS rules for your element */
      /* boh */
    </style>*/ -->
      <div>
        <div id="id">
        Id : {{id}} <br>
        </div>

        <div id="firstname">
          firstname : {{firstname}}  <br>
        </div>

        <div id="lastname">
          lastname : {{lastname}}  <br>
        </div>

        <div id="address">
          address : {{address}}  <br>
        </div>

        <div id="description">
          description : {{description}}  <br>
        </div>
        <!-- image : {{image}} -->

        <div id="image">
          <img src={{image}} />
        </div>

        <iron-ajax
         id="ajax"
         url="/freelancer/{{id}}"
         method="GET"
         handle-as="json"
         content-type ="application/json"
         on-response="finished">
       </iron-ajax>

     </div>

  </template>

  <script>
    Polymer({
      is: "ja-profile",

      properties: {
        id: {
          type: String,
          observer: '_idchanged'
        },
        firstname: {
          type : String
        },
        lastname: {
          type : String
        },
        address: {
          type : String
        },
        description : {
          type : String
        },
        image : {
          type : String
        },
      },
      ready: function(){
        if(this.id !== "" && this.id !== undefined){
          let ajaxel = this.$.ajax;
          ajaxel.generateRequest();
        }
      },

      _idchanged: function(id){
        this.id = id;
        if(this.id !== "" && this.id !== undefined){
          let ajaxel = this.$.ajax;
          ajaxel.generateRequest();
        }
      },

      finished : function(e){
        let res = e.detail.response;
        // console.log(res);
        this.firstname = res.firstName;
        this.lastname = res.lastName;
        this.address = res.address;
        this.description = res.description;
        this.image = res.image;
      }
    });
  </script>

</dom-module>
