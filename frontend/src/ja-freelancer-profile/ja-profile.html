<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<dom-module id="ja-profile">

  <template>
    <style>

      /* CSS rules for your element */
      /* boh */

      #container{
        width : 100%;
        color: dimgray;
        background: white;
        padding: 10px;
        border-radius: 3px;
      }
      #firstname {
        display: block;
      }
      #middle{
        width:30%;
        display: inline-block;
        padding: 10px;
      }
      #imagediv{
        float: left;
        width: 80px;
        padding: 10px;
      }
      #image {
        width: 100%;
      }
      #ads{
        float:right;
        width:30%;
      }

    </style>

    <section id = "container">

      <div id="imagediv">
        <img id="image" src={{image}} />
      </div>

      <section id="middle">

          <div id="firstname">
              firstname : {{firstname}}
          </div>
          <div id="lastname">
              lastname : {{lastname}}
          </div>

          <div id="address">
              address : {{address}}
          </div>

          <div id="description">
              description : {{description}}
          </div>

      </section>

      <div id="ads">
        placeholder for something
      </div>

    </section>

    <iron-ajax
     id="ajax"
     url="/freelancer/{{id}}"
     method="GET"
     handle-as="json"
     content-type ="application/json"
     on-response="_finished">
    </iron-ajax>

  </template>

  <script>
    Polymer({
      is: "ja-profile",

      properties: {
        id: {
          type: String,
          observer: '_idchanged'
        },
        firstname: {
          type : String
        },
        lastname: {
          type : String
        },
        address: {
          type : String
        },
        description : {
          type : String
        },
        image : {
          type : String
        },
        price : {
          type : String
        },
        location : {
          type : String
        },
        profession : {
          type : String
        },
        phone : {
          type : String
        },
        email : {
          type : String
        },
      },

      ready: function(){
        if(this.id !== "" && this.id !== undefined){
          const ajaxel = this.$.ajax;
          ajaxel.generateRequest();
        }
      },

      _idchanged: function(id){
        this.id = id;
        if(this.id !== "" && this.id !== undefined){
          const ajaxel = this.$.ajax;
          ajaxel.generateRequest();
        }
      },

      _finished : function(e){
        const res = e.detail.response;
        // console.log(res);
        this.firstname = res.firstName;
        this.lastname = res.lastName;
        this.address = res.address;
        this.description = res.description;
        this.email = res.email;
        this.phone = res.phone;
        this.location = res.location;
        this.price = res.price;
        this.profession = res.profession;
        this.image = res.image;
      }
    });
  </script>

</dom-module>
