<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<dom-module id="ja-notification-item">

  <template>
    <style>
      /* CSS rules for your element */
      :host {
        display: block;
        margin: 20px 0;
      }

      paper-card {
        padding:50px;
        width: 100%;
      }

      #right{
        float:right;
        padding-right:100px;
      }

      #left{
        float:left;
        padding-left:100px;
      }

      #notification-status{
        padding-top:20px;
      }

      .notification-profession {
        font-size: 24px;
        text-decoration: none;
      }



    </style>
    <paper-card>
      <div id="left">
        <div id="notification-profession">
        <span>{{notification.profession}}</span>
      </div>
      <div id="notification-description">
        <span>{{notification.description}}</span>
      </div>
      <div id="notification-status">
        <span>{{notification.status}}</span>
      </div>

      <template id="yesno" is="dom-if" if="{{_notificationRefused(notification.status)}}" >
        <span>

          <div>Call another?:</div>
          <paper-button id="buttonYes" raised on-click="_sendYes">
            Yes
          </paper-button>
          <paper-button id="buttonNo" raised on-click="_sendNo">
            No
          </paper-button>

         </span>
      </template>

      </div>
      <div id="right">
        <div>
          <span id="not-name">
            <!-- {{notification.availableFreelancers.0.firstName}} -->
          </span>
        </div>
        <div>
          <span id="not-address">
            <!-- {{notification.availableFreelancers.0.address}} -->
          </span>
        </div>
        <div>
          <span id="not-category">
            <!-- {{notification.availableFreelancers.0.category}} -->
          </span>
        </div>
        <div>
          <span id="not-email">
            <!-- {{notification.availableFreelancers.0.email}} -->
          </span>
        </div>
      </div>
    </paper-card>

    <iron-ajax id="buttonYes" url="/notification/{{notification._id}}/yes" method="PUT"></iron-ajax>
    <iron-ajax id="buttonNo" url="/notification/{{user._id}}/no" method="PUT"></iron-ajax>

  </template>

  <script>
    Polymer({
      is: "ja-notification-item",

      properties: {
        notification: {
          type: Object,
        },
        frnumber:{
          type: Number,
        },
      },

      ready: function() {
        //console.log(this.notification.availableFreelancers[this.frnumber]);

        this.$['not-email'].innerHTML=this.notification.availableFreelancers[this.frnumber].email;
        this.$['not-category'].innerHTML=this.notification.availableFreelancers[this.frnumber].category;
        this.$['not-address'].innerHTML=this.notification.availableFreelancers[this.frnumber].address;

        this.$['not-name'].innerHTML=this.notification.availableFreelancers[this.frnumber].firstName + " " +this.notification.availableFreelancers[this.frnumber].lastName;

        if(this.notification.status == null || this.notification.status == undefined){
            this.$['notification-status'].innerHTML="Pending";
        }

      },

      _notificationRefused : function(status){
        return status  == "Refused";
      },

      _sendYes : function(){
        console.log("Yes");
        const ajaxel = this.$.buttonYes;
        ajaxel.generateRequest();
      },

      _sendNo : function(){
        console.log("No");
        const ajaxel = this.$.buttonNo;
        ajaxel.generateRequest();
      },

    });
  </script>

</dom-module>
